<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>EV3 control</title>
</head>
<body>
<div style="position: absolute; top: 0px; left: 0px;"> <iframe id="frame1" src="index1.html" align="left" frameborder="0" height="700" scrolling="yes" width="400"></iframe>
</div>

<div style="position: absolute; top: 0px; left: 400px;"> <img id="cam" src="" height="600" width="800"></img></div>

<div style="position: absolute; top: 0px; left: 410px;">
    <p id="error message"></p>
</div>

<script> 
    // Below we generate the webcam url.
    // This url is deducted from the url of this page.
    // The assumption is that the webcam port number is one higher than the port number of this page.
    var urlStr = document.URL; // url of this page.
    var patt = /:([0-9]+)/; // regular expression to filter out the portnumber from the url.
    if (patt.test(urlStr) == true) {
        // Execute the regular expression.
        // The result will contain the tlast matched characters in index 0 an the first parenthesized substring match in index 1.
        var res = patt.exec(urlStr);
        var portNumberPlusOne = (parseInt(res[1]) + 1).toString(); // the first parenthesized substring matches is in index 1
        var newUrlStr = urlStr.replace(res[1],portNumberPlusOne);
        document.getElementById("cam").src = newUrlStr + "video"; // url of the webcam video page
    } else {
        document.getElementById("error message").innerHTML = "cannot find webcam url"; // write error message the to page
    }
</script>
</body></html>